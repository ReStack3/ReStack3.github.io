

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Ling">
  <meta name="keywords" content="">
  
    <meta name="description" content="本文仅是由于自己经常多语言开发，对于一些语言时常不用感到陌生或者使用中同其他语言用法混淆，故作此文，仅为自己提供一个Python语言使用的知识体系。  数据类型Python 的数据类型可以大致分为以下几类：基本数据类型、容器数据类型、集合数据类型和其他特殊类型。    数据类型 描述 示例    整数 (int) 整数类型，支持正数、负数及零 x &#x3D; 10, y &#x3D; -5   浮点数 (floa">
<meta property="og:type" content="article">
<meta property="og:title" content="Python基础语法概览">
<meta property="og:url" content="http://example.com/2025/05/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/Python%E8%AF%AD%E6%B3%95%E6%A6%82%E8%A7%88/index.html">
<meta property="og:site_name" content="The Peak Tower">
<meta property="og:description" content="本文仅是由于自己经常多语言开发，对于一些语言时常不用感到陌生或者使用中同其他语言用法混淆，故作此文，仅为自己提供一个Python语言使用的知识体系。  数据类型Python 的数据类型可以大致分为以下几类：基本数据类型、容器数据类型、集合数据类型和其他特殊类型。    数据类型 描述 示例    整数 (int) 整数类型，支持正数、负数及零 x &#x3D; 10, y &#x3D; -5   浮点数 (floa">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2024/12/27/gKsiPLTCq57mABH.png">
<meta property="og:image" content="https://s2.loli.net/2025/03/15/ZOcUTkVhb89xHvg.png">
<meta property="article:published_time" content="2025-05-09T07:31:42.371Z">
<meta property="article:modified_time" content="2025-05-09T13:15:40.807Z">
<meta property="article:author" content="Ling">
<meta property="article:tag" content="基础知识">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://s2.loli.net/2024/12/27/gKsiPLTCq57mABH.png">
  
  
  
  <title>Python基础语法概览 - The Peak Tower</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":"ture","follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"7a4M5yfyGptX0OG18qvJppXQ-gzGzoHsz","app_key":"y6dZFtA8I8Lg1KVhHbujblfB","server_url":"https://7a4m5yfy.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', '');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Python基础语法概览"></span>
          
        </div>

        
          
  <div class="mt-3">
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          9.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          80 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Python基础语法概览</h1>
            
            
              <div class="markdown-body">
                
                <blockquote>
<p>本文仅是由于自己经常多语言开发，对于一些语言时常不用感到陌生或者使用中同其他语言用法混淆，故作此文，仅为自己提供一个Python语言使用的知识体系。</p>
</blockquote>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><p>Python 的数据类型可以大致分为以下几类：基本数据类型、容器数据类型、集合数据类型和其他特殊类型。</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong>整数 (int)</strong></td>
<td>整数类型，支持正数、负数及零</td>
<td><code>x = 10</code>, <code>y = -5</code></td>
</tr>
<tr>
<td><strong>浮点数 (float)</strong></td>
<td>浮动小数点数，表示实数</td>
<td><code>x = 10.5</code>, <code>y = -3.14</code></td>
</tr>
<tr>
<td><strong>布尔值 (bool)</strong></td>
<td>布尔类型，只有 <code>True</code> 和 <code>False</code> 两个值</td>
<td><code>x = True</code>, <code>y = False</code></td>
</tr>
<tr>
<td><strong>字符串 (str)</strong></td>
<td>用于存储文本，支持单引号、双引号、三引号表示</td>
<td><code>s = &quot;Hello&quot;</code>, <code>s2 = &#39;World&#39;</code></td>
</tr>
<tr>
<td><strong>列表 (list)</strong></td>
<td>可变的、有序集合，支持混合类型元素，允许修改</td>
<td><code>lst = [1, 2.5, &quot;hello&quot;]</code></td>
</tr>
<tr>
<td><strong>元组 (tuple)</strong></td>
<td>不可变的、有序集合，支持混合类型元素</td>
<td><code>tup = (1, 2.5, &quot;hello&quot;)</code></td>
</tr>
<tr>
<td><strong>集合 (set)</strong></td>
<td>无序、不重复的集合，支持集合运算</td>
<td><code>s = &#123;1, 2, 3&#125;</code>, <code>s2 = &#123;3, 4, 5&#125;</code></td>
</tr>
<tr>
<td><strong>字典 (dict)</strong></td>
<td>无序的键值对集合，键唯一，值可重复</td>
<td><code>d = &#123;&#39;a&#39;: 1, &#39;b&#39;: 2&#125;</code></td>
</tr>
<tr>
<td><strong>None</strong></td>
<td>表示“无值”或“空值”，用于表示空对象</td>
<td><code>x = None</code></td>
</tr>
<tr>
<td><strong>字节串 (bytes)</strong></td>
<td>不可变的字节序列，用于存储二进制数据</td>
<td><code>b = b&quot;Hello&quot;</code></td>
</tr>
<tr>
<td><strong>字节数组 (bytearray)</strong></td>
<td>可变的字节序列，支持二进制数据的修改</td>
<td><code>ba = bytearray([65, 66, 67])</code></td>
</tr>
<tr>
<td><strong>复数 (complex)</strong></td>
<td>复数类型，由实数部分和虚数部分组成</td>
<td><code>z = 1 + 2j</code></td>
</tr>
</tbody></table>
<p><img src="https://s2.loli.net/2024/12/27/gKsiPLTCq57mABH.png" srcset="/img/loading.gif" lazyload alt="d4368f36a1d54e948f869e59e0cd996c"></p>
<h1 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h1><p>Python 的泛型（Generics）功能与其他强类型语言（如 Java 或 C++）中的泛型不同，因为 Python 是动态类型语言。Python 中并没有显式的泛型概念，而是通过类型注解（Type Hints）和 <code>typing</code> 模块来实现类似于泛型的功能。通过这些方式，可以在函数或类中使用泛型类型来提高代码的可读性和可维护性，同时保持灵活性。</p>
<h3 id="1-使用-typing-模块中的泛型"><a href="#1-使用-typing-模块中的泛型" class="headerlink" title="1. 使用 typing 模块中的泛型"></a>1. <strong>使用 <code>typing</code> 模块中的泛型</strong></h3><p>Python 提供了 <code>typing</code> 模块来支持类型注解，其中有一些用于定义泛型类型的工具。常用的泛型类型包括：</p>
<ul>
<li><code>List</code></li>
<li><code>Dict</code></li>
<li><code>Tuple</code></li>
<li><code>Union</code></li>
<li><code>Optional</code></li>
<li><code>TypeVar</code>（类型变量）</li>
</ul>
<p>这些泛型类型通过类型注解在不影响 Python 动态类型特性的情况下，表达出不同类型的参数或返回值。</p>
<h3 id="2-TypeVar-和泛型函数"><a href="#2-TypeVar-和泛型函数" class="headerlink" title="2. TypeVar 和泛型函数"></a>2. <strong><code>TypeVar</code> 和泛型函数</strong></h3><p><code>TypeVar</code> 用于创建一个类型变量，使得我们可以在函数或类中使用任意类型作为参数和返回值，而不需要限制类型。通过 <code>TypeVar</code>，你可以实现类似于 Java 和 C++ 中的泛型功能。</p>
<h4 id="示例：使用-TypeVar-创建泛型函数"><a href="#示例：使用-TypeVar-创建泛型函数" class="headerlink" title="示例：使用 TypeVar 创建泛型函数"></a>示例：使用 <code>TypeVar</code> 创建泛型函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypeVar, <span class="hljs-type">List</span><br><br>T = TypeVar(<span class="hljs-string">&#x27;T&#x27;</span>)  <span class="hljs-comment"># 定义类型变量 T</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_first_element</span>(<span class="hljs-params">lst: <span class="hljs-type">List</span>[T]</span>) -&gt; T:<br>    <span class="hljs-string">&quot;&quot;&quot;返回列表中的第一个元素&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> lst[<span class="hljs-number">0</span>]<br><br><span class="hljs-comment"># 使用泛型函数</span><br><span class="hljs-built_in">print</span>(get_first_element([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))   <span class="hljs-comment"># 输出: 1，类型是 int</span><br><span class="hljs-built_in">print</span>(get_first_element([<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>]))  <span class="hljs-comment"># 输出: &#x27;a&#x27;，类型是 str</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>T</code> 是一个类型变量，它允许我们传入不同的类型，而不限制为某个具体类型。</li>
<li><code>List[T]</code> 表示列表的元素类型是 <code>T</code>，也就是我们传入的实际类型。</li>
</ul>
<h3 id="3-Generic-类"><a href="#3-Generic-类" class="headerlink" title="3. Generic 类"></a>3. <strong><code>Generic</code> 类</strong></h3><p><code>Generic</code> 是 <code>typing</code> 模块中的一个类，用来创建泛型类。通过继承 <code>Generic</code>，你可以创建支持不同类型的类。</p>
<h4 id="示例：使用-Generic-创建泛型类"><a href="#示例：使用-Generic-创建泛型类" class="headerlink" title="示例：使用 Generic 创建泛型类"></a>示例：使用 <code>Generic</code> 创建泛型类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Generic</span>, <span class="hljs-type">List</span>, TypeVar<br><br>T = TypeVar(<span class="hljs-string">&#x27;T&#x27;</span>)  <span class="hljs-comment"># 定义类型变量 T</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>(<span class="hljs-type">Generic</span>[T]):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value: T</span>):<br>        self.value = value<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_value</span>(<span class="hljs-params">self</span>) -&gt; T:<br>        <span class="hljs-keyword">return</span> self.value<br><br><span class="hljs-comment"># 创建不同类型的 Box 实例</span><br>int_box = Box(<span class="hljs-number">123</span>)<br>str_box = Box(<span class="hljs-string">&quot;hello&quot;</span>)<br><br><span class="hljs-built_in">print</span>(int_box.get_value())  <span class="hljs-comment"># 输出: 123</span><br><span class="hljs-built_in">print</span>(str_box.get_value())  <span class="hljs-comment"># 输出: hello</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>Box</code> 是一个泛型类，<code>T</code> 代表可以是任何类型。</li>
<li>通过创建 <code>Box</code> 对象时指定类型，可以保证 <code>Box</code> 中的 <code>value</code> 对应类型一致。</li>
</ul>
<h3 id="4-使用-Union-和-Optional"><a href="#4-使用-Union-和-Optional" class="headerlink" title="4. 使用 Union 和 Optional"></a>4. <strong>使用 <code>Union</code> 和 <code>Optional</code></strong></h3><ul>
<li>**<code>Union</code>**：表示多个类型中的一种，类似于 Java 中的 <code>|</code> 操作符。</li>
<li>**<code>Optional</code>**：是 <code>Union</code> 的一个特殊情况，表示某个值可以是某个类型或者 <code>None</code>，等同于 <code>Union[T, None]</code>。</li>
</ul>
<h4 id="示例：使用-Union-和-Optional"><a href="#示例：使用-Union-和-Optional" class="headerlink" title="示例：使用 Union 和 Optional"></a>示例：使用 <code>Union</code> 和 <code>Optional</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Union</span>, <span class="hljs-type">Optional</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_data</span>(<span class="hljs-params">data: <span class="hljs-type">Union</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(data, <span class="hljs-built_in">int</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Received integer: <span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(data, <span class="hljs-built_in">str</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Received string: <span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Unknown type&quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_value</span>(<span class="hljs-params">data: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <span class="hljs-keyword">if</span> data <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;No data&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Received: <span class="hljs-subst">&#123;data&#125;</span>&quot;</span><br><br><span class="hljs-comment"># 测试</span><br><span class="hljs-built_in">print</span>(handle_data(<span class="hljs-number">42</span>))        <span class="hljs-comment"># 输出: Received integer: 42</span><br><span class="hljs-built_in">print</span>(handle_data(<span class="hljs-string">&quot;Hello&quot;</span>))   <span class="hljs-comment"># 输出: Received string: Hello</span><br><span class="hljs-built_in">print</span>(get_value(<span class="hljs-literal">None</span>))        <span class="hljs-comment"># 输出: No data</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>Union[int, str]</code> 表示参数 <code>data</code> 可以是 <code>int</code> 或 <code>str</code> 类型。</li>
<li><code>Optional[str]</code> 表示参数 <code>data</code> 可以是 <code>str</code> 类型或 <code>None</code>，即它等价于 <code>Union[str, None]</code>。</li>
</ul>
<h3 id="5-泛型约束"><a href="#5-泛型约束" class="headerlink" title="5. 泛型约束"></a>5. <strong>泛型约束</strong></h3><p>在某些情况下，你可能希望限定泛型类型的范围。你可以使用 <code>TypeVar</code> 的 <code>bound</code> 参数来限制类型变量的范围，使其只能是某个类的子类或某些特定类型。</p>
<h4 id="示例：泛型约束"><a href="#示例：泛型约束" class="headerlink" title="示例：泛型约束"></a>示例：泛型约束</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypeVar, <span class="hljs-type">List</span><br><br>T = TypeVar(<span class="hljs-string">&#x27;T&#x27;</span>, bound=<span class="hljs-built_in">int</span>)  <span class="hljs-comment"># 限制 T 必须是 int 或其子类</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sum_elements</span>(<span class="hljs-params">lst: <span class="hljs-type">List</span>[T]</span>) -&gt; T:<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(lst)<br><br><span class="hljs-built_in">print</span>(sum_elements([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]))  <span class="hljs-comment"># 输出: 6</span><br><span class="hljs-comment"># print(sum_elements([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]))  # 会报错，类型不匹配</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>TypeVar(&#39;T&#39;, bound=int)</code> 表示 <code>T</code> 必须是 <code>int</code> 或其子类。这样，我们就可以在函数中限定泛型类型。</li>
</ul>
<h3 id="6-Callable-和-泛型函数类型"><a href="#6-Callable-和-泛型函数类型" class="headerlink" title="6. Callable 和 泛型函数类型"></a>6. <strong><code>Callable</code> 和 泛型函数类型</strong></h3><p><code>Callable</code> 用来描述一个函数的类型，包括它的参数和返回值类型。它也可以与泛型一起使用。</p>
<h4 id="示例：使用-Callable-定义泛型函数类型"><a href="#示例：使用-Callable-定义泛型函数类型" class="headerlink" title="示例：使用 Callable 定义泛型函数类型"></a>示例：使用 <code>Callable</code> 定义泛型函数类型</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Callable</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_function</span>(<span class="hljs-params">func: <span class="hljs-type">Callable</span>[[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>], <span class="hljs-built_in">int</span>], x: <span class="hljs-built_in">int</span>, y: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">return</span> func(x, y)<br><br><span class="hljs-comment"># 定义一个加法函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">int</span>, b: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">return</span> a + b<br><br><span class="hljs-built_in">print</span>(apply_function(add, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment"># 输出: 8</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>Callable[[int, int], int]</code> 表示该函数类型接收两个 <code>int</code> 参数并返回一个 <code>int</code> 类型的结果。</li>
<li>你可以将这个类型用于任何符合这个签名的函数。</li>
</ul>
<h3 id="7-Iterable-和-Iterator-泛型"><a href="#7-Iterable-和-Iterator-泛型" class="headerlink" title="7. Iterable 和 Iterator 泛型"></a>7. <strong><code>Iterable</code> 和 <code>Iterator</code> 泛型</strong></h3><p>Python 的 <code>Iterable</code> 和 <code>Iterator</code> 是用于表示可迭代对象和迭代器的泛型类型。<code>Iterable</code> 表示一个可以迭代的对象，<code>Iterator</code> 表示一个可以返回下一个元素的对象。</p>
<h4 id="示例：使用-Iterable-和-Iterator"><a href="#示例：使用-Iterable-和-Iterator" class="headerlink" title="示例：使用 Iterable 和 Iterator"></a>示例：使用 <code>Iterable</code> 和 <code>Iterator</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Iterable, Iterator<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_elements</span>(<span class="hljs-params">elements: Iterable[<span class="hljs-built_in">int</span>]</span>) -&gt; Iterator[<span class="hljs-built_in">int</span>]:<br>    <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> elements:<br>        <span class="hljs-keyword">yield</span> element * <span class="hljs-number">2</span><br><br><span class="hljs-comment"># 测试</span><br>result = process_elements([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(result))  <span class="hljs-comment"># 输出: [2, 4, 6, 8]</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>Iterable[int]</code> 表示接收一个 <code>int</code> 类型的可迭代对象。</li>
<li><code>Iterator[int]</code> 表示返回 <code>int</code> 类型的迭代器。</li>
</ul>
<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h3 id="1-类和对象"><a href="#1-类和对象" class="headerlink" title="1. 类和对象"></a>1. <strong>类和对象</strong></h3><ul>
<li><strong>类（Class）</strong> 是定义对象（实例）行为和属性的模板。它是对象的蓝图。</li>
<li><strong>对象（Object）</strong> 是类的实例，通过类创建。</li>
</ul>
<h4 id="示例：创建一个简单的类和对象"><a href="#示例：创建一个简单的类和对象" class="headerlink" title="示例：创建一个简单的类和对象"></a>示例：创建一个简单的类和对象</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>:<br>    <span class="hljs-comment"># 构造函数</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):<br>        self.name = name  <span class="hljs-comment"># 实例属性</span><br>        self.age = age    <span class="hljs-comment"># 实例属性</span><br><br>    <span class="hljs-comment"># 方法</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">bark</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.name&#125;</span> is barking!&quot;</span>)<br><br><span class="hljs-comment"># 创建对象</span><br>dog1 = Dog(<span class="hljs-string">&quot;Buddy&quot;</span>, <span class="hljs-number">3</span>)<br><br><span class="hljs-comment"># 访问属性和方法</span><br><span class="hljs-built_in">print</span>(dog1.name)  <span class="hljs-comment"># 输出: Buddy</span><br><span class="hljs-built_in">print</span>(dog1.age)   <span class="hljs-comment"># 输出: 3</span><br>dog1.bark()       <span class="hljs-comment"># 输出: Buddy is barking!</span><br></code></pre></td></tr></table></figure>

<h3 id="2-类的构造函数-init"><a href="#2-类的构造函数-init" class="headerlink" title="2. 类的构造函数 (__init__)"></a>2. <strong>类的构造函数 (<code>__init__</code>)</strong></h3><p>在 Python 中，<code>__init__</code> 是一个特殊的方法，用于初始化对象的状态。每次创建一个类的实例时，<code>__init__</code> 方法都会被自动调用。</p>
<h4 id="示例：构造函数"><a href="#示例：构造函数" class="headerlink" title="示例：构造函数"></a>示例：构造函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):<br>        self.name = name<br>        self.age = age<br><br>person1 = Person(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">25</span>)<br><span class="hljs-built_in">print</span>(person1.name)  <span class="hljs-comment"># 输出: Alice</span><br><span class="hljs-built_in">print</span>(person1.age)   <span class="hljs-comment"># 输出: 25</span><br></code></pre></td></tr></table></figure>

<h3 id="3-实例属性和类属性"><a href="#3-实例属性和类属性" class="headerlink" title="3. 实例属性和类属性"></a>3. <strong>实例属性和类属性</strong></h3><ul>
<li><strong>实例属性</strong> 是与对象相关的属性，通常在 <code>__init__</code> 方法中定义。</li>
<li><strong>类属性</strong> 是与类本身相关的属性，所有实例共享这个属性。</li>
</ul>
<h4 id="示例：实例属性和类属性"><a href="#示例：实例属性和类属性" class="headerlink" title="示例：实例属性和类属性"></a>示例：实例属性和类属性</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>:<br>    species = <span class="hljs-string">&quot;Feline&quot;</span>  <span class="hljs-comment"># 类属性</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name, age</span>):<br>        self.name = name  <span class="hljs-comment"># 实例属性</span><br>        self.age = age    <span class="hljs-comment"># 实例属性</span><br><br>cat1 = Cat(<span class="hljs-string">&quot;Whiskers&quot;</span>, <span class="hljs-number">2</span>)<br>cat2 = Cat(<span class="hljs-string">&quot;Tom&quot;</span>, <span class="hljs-number">5</span>)<br><br><span class="hljs-built_in">print</span>(cat1.species)  <span class="hljs-comment"># 输出: Feline</span><br><span class="hljs-built_in">print</span>(cat2.species)  <span class="hljs-comment"># 输出: Feline</span><br><span class="hljs-built_in">print</span>(cat1.name)     <span class="hljs-comment"># 输出: Whiskers</span><br><span class="hljs-built_in">print</span>(cat2.name)     <span class="hljs-comment"># 输出: Tom</span><br><br><span class="hljs-comment"># 修改类属性</span><br>Cat.species = <span class="hljs-string">&quot;Wild Feline&quot;</span><br><span class="hljs-built_in">print</span>(cat1.species)  <span class="hljs-comment"># 输出: Wild Feline</span><br><span class="hljs-built_in">print</span>(cat2.species)  <span class="hljs-comment"># 输出: Wild Feline</span><br></code></pre></td></tr></table></figure>

<h3 id="4-方法（Method）"><a href="#4-方法（Method）" class="headerlink" title="4. 方法（Method）"></a>4. <strong>方法（Method）</strong></h3><p>方法是定义在类内部的函数，通常表示对象的行为。方法的第一个参数通常是 <code>self</code>，表示对象自身。</p>
<h4 id="示例：定义和调用方法"><a href="#示例：定义和调用方法" class="headerlink" title="示例：定义和调用方法"></a>示例：定义和调用方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, make, model</span>):<br>        self.make = make<br>        self.model = model<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">display_info</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Car make: <span class="hljs-subst">&#123;self.make&#125;</span>, Model: <span class="hljs-subst">&#123;self.model&#125;</span>&quot;</span>)<br><br>car1 = Car(<span class="hljs-string">&quot;Toyota&quot;</span>, <span class="hljs-string">&quot;Corolla&quot;</span>)<br>car1.display_info()  <span class="hljs-comment"># 输出: Car make: Toyota, Model: Corolla</span><br></code></pre></td></tr></table></figure>

<h3 id="5-继承（Inheritance）"><a href="#5-继承（Inheritance）" class="headerlink" title="5. 继承（Inheritance）"></a>5. <strong>继承（Inheritance）</strong></h3><p>继承是面向对象编程中的一个重要概念，它允许一个类继承另一个类的属性和方法。继承可以提高代码的复用性。</p>
<h4 id="示例：继承"><a href="#示例：继承" class="headerlink" title="示例：继承"></a>示例：继承</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 父类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>        self.name = name<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.name&#125;</span> makes a sound!&quot;</span>)<br><br><span class="hljs-comment"># 子类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.name&#125;</span> barks!&quot;</span>)<br><br><span class="hljs-comment"># 创建子类实例</span><br>dog = Dog(<span class="hljs-string">&quot;Buddy&quot;</span>)<br>dog.speak()  <span class="hljs-comment"># 输出: Buddy barks!</span><br></code></pre></td></tr></table></figure>

<p>在这个例子中，<code>Dog</code> 继承自 <code>Animal</code> 类，并且重写了 <code>speak</code> 方法。</p>
<h3 id="6-多态（Polymorphism）"><a href="#6-多态（Polymorphism）" class="headerlink" title="6. 多态（Polymorphism）"></a>6. <strong>多态（Polymorphism）</strong></h3><p>多态是指相同的方法可以作用于不同类型的对象，表现为不同的行为。通常通过继承和方法重写来实现。</p>
<h4 id="示例：多态"><a href="#示例：多态" class="headerlink" title="示例：多态"></a>示例：多态</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span>(<span class="hljs-title class_ inherited__">Animal</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.name&#125;</span> chirps!&quot;</span>)<br><br><span class="hljs-comment"># 多态的实现</span><br>animals = [Dog(<span class="hljs-string">&quot;Buddy&quot;</span>), Bird(<span class="hljs-string">&quot;Parrot&quot;</span>)]<br><span class="hljs-keyword">for</span> animal <span class="hljs-keyword">in</span> animals:<br>    animal.speak()  <span class="hljs-comment"># 不同对象表现出不同的行为</span><br></code></pre></td></tr></table></figure>

<h3 id="7-封装（Encapsulation）"><a href="#7-封装（Encapsulation）" class="headerlink" title="7. 封装（Encapsulation）"></a>7. <strong>封装（Encapsulation）</strong></h3><p>封装是将数据和方法封装在类中，只通过类的接口进行访问，限制对对象的直接操作。Python 通过“私有化”属性和方法来实现封装。虽然 Python 没有严格的私有化机制，但通过命名约定（前缀双下划线）来表示私有成员。</p>
<h4 id="示例：封装"><a href="#示例：封装" class="headerlink" title="示例：封装"></a>示例：封装</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BankAccount</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, owner, balance</span>):<br>        self.owner = owner<br>        self.__balance = balance  <span class="hljs-comment"># 私有属性</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">self, amount</span>):<br>        <span class="hljs-keyword">if</span> amount &gt; <span class="hljs-number">0</span>:<br>            self.__balance += amount<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">self, amount</span>):<br>        <span class="hljs-keyword">if</span> amount &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> amount &lt;= self.__balance:<br>            self.__balance -= amount<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Insufficient funds&quot;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_balance</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.__balance  <span class="hljs-comment"># 通过方法访问私有属性</span><br><br>account = BankAccount(<span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-number">1000</span>)<br>account.deposit(<span class="hljs-number">500</span>)<br><span class="hljs-built_in">print</span>(account.get_balance())  <span class="hljs-comment"># 输出: 1500</span><br>account.withdraw(<span class="hljs-number">200</span>)<br><span class="hljs-built_in">print</span>(account.get_balance())  <span class="hljs-comment"># 输出: 1300</span><br></code></pre></td></tr></table></figure>

<p>在这个例子中，<code>__balance</code> 是一个私有属性，不能直接从外部访问，只能通过方法来操作。</p>
<h3 id="8-抽象（Abstraction）"><a href="#8-抽象（Abstraction）" class="headerlink" title="8. 抽象（Abstraction）"></a>8. <strong>抽象（Abstraction）</strong></h3><p>抽象是将实现细节隐藏起来，只暴露接口。Python 可以通过 <code>abc</code> 模块来实现抽象基类（Abstract Base Class，ABC）。抽象类不能实例化，只能作为子类的基类使用。</p>
<h4 id="示例：抽象类"><a href="#示例：抽象类" class="headerlink" title="示例：抽象类"></a>示例：抽象类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> abc <span class="hljs-keyword">import</span> ABC, abstractmethod<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span>(<span class="hljs-title class_ inherited__">ABC</span>):<br><span class="hljs-meta">    @abstractmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">area</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-title class_ inherited__">Shape</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, width, height</span>):<br>        self.width = width<br>        self.height = height<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">area</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.width * self.height<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span>(<span class="hljs-title class_ inherited__">Shape</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, radius</span>):<br>        self.radius = radius<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">area</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * self.radius * self.radius<br><br><span class="hljs-comment"># 创建对象</span><br>rectangle = Rectangle(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(rectangle.area())  <span class="hljs-comment"># 输出: 15</span><br><br>circle = Circle(<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(circle.area())  <span class="hljs-comment"># 输出: 50.24</span><br></code></pre></td></tr></table></figure>

<p>在这个例子中，<code>Shape</code> 是一个抽象基类，包含了一个抽象方法 <code>area</code>，具体的实现由子类 <code>Rectangle</code> 和 <code>Circle</code> 提供。</p>
<h3 id="9-类方法和静态方法"><a href="#9-类方法和静态方法" class="headerlink" title="9. 类方法和静态方法"></a>9. <strong>类方法和静态方法</strong></h3><ul>
<li><strong>类方法</strong> 是与类本身相关的方法，而不是与实例相关的。通过 <code>@classmethod</code> 装饰器定义。</li>
<li><strong>静态方法</strong> 是不依赖于实例或类的方法，通常用于工具函数。通过 <code>@staticmethod</code> 装饰器定义。</li>
</ul>
<h4 id="示例：类方法和静态方法"><a href="#示例：类方法和静态方法" class="headerlink" title="示例：类方法和静态方法"></a>示例：类方法和静态方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span>:<br>    class_variable = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        MyClass.class_variable += <span class="hljs-number">1</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">class_method</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Class method: <span class="hljs-subst">&#123;cls.class_variable&#125;</span>&quot;</span>)<br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">static_method</span>():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Static method&quot;</span>)<br><br><span class="hljs-comment"># 调用类方法和静态方法</span><br>MyClass.class_method()  <span class="hljs-comment"># 输出: Class method: 0</span><br>MyClass.static_method()  <span class="hljs-comment"># 输出: Static method</span><br></code></pre></td></tr></table></figure>

<h1 id="并发编程"><a href="#并发编程" class="headerlink" title="并发编程"></a>并发编程</h1><p>在 Python 中，并发编程（Concurrency）是指在同一时间段内管理多个任务的执行，而不一定要求它们在同一时刻完全并行执行。Python 提供了多种方式来实现并发编程，包括 <strong>多线程（Threading）</strong>、<strong>多进程（Multiprocessing）</strong> 和 <strong>异步编程（Asyncio）</strong>，每种方式都有其适用的场景和优缺点。</p>
<p><img src="https://s2.loli.net/2025/03/15/ZOcUTkVhb89xHvg.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="1-多线程编程（Threading）"><a href="#1-多线程编程（Threading）" class="headerlink" title="1. 多线程编程（Threading）"></a>1. <strong>多线程编程（Threading）</strong></h3><p>Python 的 <code>threading</code> 模块提供了多线程编程的支持，允许你在单个进程中创建多个线程。线程在同一个进程内共享内存空间，因此可以更高效地进行数据共享和通信。</p>
<p><strong>适用场景：</strong></p>
<ul>
<li>适用于 I&#x2F;O 密集型任务（如文件操作、网络请求等）。</li>
<li>由于 Python 的全局解释器锁（GIL），在 CPU 密集型任务中，多个线程并不能并行执行 Python 代码，而是交替执行。</li>
</ul>
<h4 id="示例：使用-threading-模块创建线程"><a href="#示例：使用-threading-模块创建线程" class="headerlink" title="示例：使用 threading 模块创建线程"></a>示例：使用 <code>threading</code> 模块创建线程</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># 定义线程要执行的任务</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Thread <span class="hljs-subst">&#123;name&#125;</span> started&quot;</span>)<br>    time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># 模拟耗时操作</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Thread <span class="hljs-subst">&#123;name&#125;</span> finished&quot;</span>)<br><br><span class="hljs-comment"># 创建线程</span><br>thread1 = threading.Thread(target=task, args=(<span class="hljs-string">&quot;A&quot;</span>,))<br>thread2 = threading.Thread(target=task, args=(<span class="hljs-string">&quot;B&quot;</span>,))<br><br><span class="hljs-comment"># 启动线程</span><br>thread1.start()<br>thread2.start()<br><br><span class="hljs-comment"># 等待线程执行完毕</span><br>thread1.join()<br>thread2.join()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Both threads finished&quot;</span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>start()</code>：启动线程，开始执行目标函数。</li>
<li><code>join()</code>：等待线程执行完毕。</li>
</ul>
<h3 id="2-多进程编程（Multiprocessing）"><a href="#2-多进程编程（Multiprocessing）" class="headerlink" title="2. 多进程编程（Multiprocessing）"></a>2. <strong>多进程编程（Multiprocessing）</strong></h3><p><code>multiprocessing</code> 模块允许你创建多个进程，多个进程可以在多个 CPU 核心上并行执行，因此它特别适合 CPU 密集型任务。每个进程有独立的内存空间和 GIL，因此可以充分利用多核 CPU。</p>
<p><strong>适用场景：</strong></p>
<ul>
<li>适用于 CPU 密集型任务，如图像处理、数据分析等。</li>
<li>每个进程有独立的内存空间，可以避免 GIL 的影响。</li>
</ul>
<h4 id="示例：使用-multiprocessing-模块创建进程"><a href="#示例：使用-multiprocessing-模块创建进程" class="headerlink" title="示例：使用 multiprocessing 模块创建进程"></a>示例：使用 <code>multiprocessing</code> 模块创建进程</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> multiprocessing<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># 定义进程要执行的任务</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Process <span class="hljs-subst">&#123;name&#125;</span> started&quot;</span>)<br>    time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># 模拟耗时操作</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Process <span class="hljs-subst">&#123;name&#125;</span> finished&quot;</span>)<br><br><span class="hljs-comment"># 创建进程</span><br>process1 = multiprocessing.Process(target=task, args=(<span class="hljs-string">&quot;A&quot;</span>,))<br>process2 = multiprocessing.Process(target=task, args=(<span class="hljs-string">&quot;B&quot;</span>,))<br><br><span class="hljs-comment"># 启动进程</span><br>process1.start()<br>process2.start()<br><br><span class="hljs-comment"># 等待进程执行完毕</span><br>process1.join()<br>process2.join()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Both processes finished&quot;</span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>start()</code>：启动进程，开始执行目标函数。</li>
<li><code>join()</code>：等待进程执行完毕。</li>
</ul>
<h3 id="3-异步编程（Asyncio）"><a href="#3-异步编程（Asyncio）" class="headerlink" title="3. 异步编程（Asyncio）"></a>3. <strong>异步编程（Asyncio）</strong></h3><p>异步编程是一种处理 I&#x2F;O 密集型任务的方式，它通过事件循环（event loop）来调度任务，并使用 <code>async</code> 和 <code>await</code> 关键字来定义协程（coroutine）。Python 的 <code>asyncio</code> 模块是一个异步编程框架，适合用来处理大量 I&#x2F;O 操作（如网络请求、数据库操作等）。</p>
<p><strong>适用场景：</strong></p>
<ul>
<li>适用于 I&#x2F;O 密集型任务，尤其是需要处理大量并发请求（如 Web 服务、爬虫等）。</li>
<li>异步编程相比多线程和多进程的优势在于，它不需要创建新的线程或进程，因此可以节省大量的系统资源。</li>
</ul>
<h4 id="示例：使用-asyncio-模块进行异步编程"><a href="#示例：使用-asyncio-模块进行异步编程" class="headerlink" title="示例：使用 asyncio 模块进行异步编程"></a>示例：使用 <code>asyncio</code> 模块进行异步编程</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-comment"># 定义异步任务</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Task <span class="hljs-subst">&#123;name&#125;</span> started&quot;</span>)<br>    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># 模拟异步操作</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Task <span class="hljs-subst">&#123;name&#125;</span> finished&quot;</span>)<br><br><span class="hljs-comment"># 定义异步主函数</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    task1 = asyncio.create_task(task(<span class="hljs-string">&quot;A&quot;</span>))<br>    task2 = asyncio.create_task(task(<span class="hljs-string">&quot;B&quot;</span>))<br><br>    <span class="hljs-comment"># 等待所有任务完成</span><br>    <span class="hljs-keyword">await</span> task1<br>    <span class="hljs-keyword">await</span> task2<br><br><span class="hljs-comment"># 运行事件循环</span><br>asyncio.run(main())<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Both tasks finished&quot;</span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>async def</code>：定义异步函数。</li>
<li><code>await</code>：挂起协程，等待异步任务完成。</li>
<li><code>asyncio.run()</code>：运行事件循环，执行异步代码。</li>
</ul>
<h3 id="4-并发模型比较"><a href="#4-并发模型比较" class="headerlink" title="4. 并发模型比较"></a>4. <strong>并发模型比较</strong></h3><table>
<thead>
<tr>
<th>特性</th>
<th>多线程（Threading）</th>
<th>多进程（Multiprocessing）</th>
<th>异步编程（Asyncio）</th>
</tr>
</thead>
<tbody><tr>
<td>适用场景</td>
<td>I&#x2F;O 密集型任务（如文件操作、网络请求）</td>
<td>CPU 密集型任务（如计算、图像处理）</td>
<td>I&#x2F;O 密集型任务（如 Web 服务、爬虫）</td>
</tr>
<tr>
<td>性能</td>
<td>受 GIL（全局解释器锁）限制，在 CPU 密集型任务中性能较差</td>
<td>可以充分利用多核 CPU，适合 CPU 密集型任务</td>
<td>高效处理并发 I&#x2F;O 请求，适合大量并发</td>
</tr>
<tr>
<td>内存使用</td>
<td>所有线程共享内存空间</td>
<td>每个进程有独立的内存空间</td>
<td>事件循环不需要额外的内存开销</td>
</tr>
<tr>
<td>使用难度</td>
<td>相对简单，但需要处理线程安全问题</td>
<td>相对复杂，涉及进程间通信、内存共享等</td>
<td>需要掌握异步编程的基本概念</td>
</tr>
</tbody></table>
<h3 id="5-线程与进程的选择"><a href="#5-线程与进程的选择" class="headerlink" title="5. 线程与进程的选择"></a>5. <strong>线程与进程的选择</strong></h3><ul>
<li><strong>线程（Threading）</strong>：<ul>
<li>适用于 I&#x2F;O 密集型任务，如文件操作、网络请求等。</li>
<li>由于 GIL 的存在，Python 中的线程不能并行执行计算密集型任务（CPU 密集型）。</li>
</ul>
</li>
<li><strong>进程（Multiprocessing）</strong>：<ul>
<li>适用于 CPU 密集型任务，如数据分析、图像处理等。</li>
<li>多进程可以充分利用多核 CPU，并且不受 GIL 限制，但它们之间的通信和数据共享相对复杂。</li>
</ul>
</li>
<li><strong>异步编程（Asyncio）</strong>：<ul>
<li>适用于大量并发的 I&#x2F;O 密集型任务。</li>
<li>异步编程能够高效地处理大量的并发请求（如 Web 服务），但在 CPU 密集型任务中表现不佳。</li>
</ul>
</li>
</ul>
<h3 id="6-进程间通信（IPC）和线程间通信"><a href="#6-进程间通信（IPC）和线程间通信" class="headerlink" title="6. 进程间通信（IPC）和线程间通信"></a>6. <strong>进程间通信（IPC）和线程间通信</strong></h3><ul>
<li><p><strong>进程间通信（IPC）</strong>：</p>
<ul>
<li>由于每个进程都有独立的内存空间，它们需要使用特殊的方式来进行通信，如管道（<code>Pipe</code>）、队列（<code>Queue</code>）等。</li>
</ul>
<h4 id="示例：使用-Queue-进行进程间通信"><a href="#示例：使用-Queue-进行进程间通信" class="headerlink" title="示例：使用 Queue 进行进程间通信"></a>示例：使用 <code>Queue</code> 进行进程间通信</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> multiprocessing<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">producer</span>(<span class="hljs-params">queue</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>        queue.put(i)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Produced: <span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">consumer</span>(<span class="hljs-params">queue</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        item = queue.get()<br>        <span class="hljs-keyword">if</span> item <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">break</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Consumed: <span class="hljs-subst">&#123;item&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    queue = multiprocessing.Queue()<br>    process1 = multiprocessing.Process(target=producer, args=(queue,))<br>    process2 = multiprocessing.Process(target=consumer, args=(queue,))<br><br>    process1.start()<br>    process2.start()<br><br>    process1.join()<br>    queue.put(<span class="hljs-literal">None</span>)  <span class="hljs-comment"># 发送结束信号</span><br>    process2.join()<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>线程间通信</strong>：</p>
<ul>
<li>线程间共享内存，因此可以直接通过共享变量、<code>Queue</code> 或 <code>Event</code> 等方式进行通信。</li>
</ul>
</li>
</ul>
<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><p>在 Python 中，<strong>异常处理</strong>（Exception Handling）用于捕获和处理程序执行过程中可能出现的错误或异常，从而避免程序崩溃并提供适当的错误信息。Python 的异常处理机制通过 <code>try</code>、<code>except</code>、<code>else</code> 和 <code>finally</code> 语句来实现。</p>
<h3 id="1-基本异常处理结构"><a href="#1-基本异常处理结构" class="headerlink" title="1. 基本异常处理结构"></a>1. <strong>基本异常处理结构</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># 可能出现异常的代码</span><br>    <span class="hljs-comment"># 例如除以零错误</span><br>    result = <span class="hljs-number">10</span> / <span class="hljs-number">0</span><br><span class="hljs-keyword">except</span> ZeroDivisionError <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-comment"># 捕获并处理异常</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>try</code> 块：包含可能会引发异常的代码。</li>
<li><code>except</code> 块：捕获指定类型的异常，并处理异常。如果没有指定异常类型，它会捕获所有异常。</li>
<li><code>as</code> 关键字：将异常实例绑定到一个变量，方便后续使用异常信息。</li>
</ul>
<h3 id="2-多个-except-语句"><a href="#2-多个-except-语句" class="headerlink" title="2. 多个 except 语句"></a>2. <strong>多个 <code>except</code> 语句</strong></h3><p>你可以使用多个 <code>except</code> 语句来捕获不同类型的异常。这样可以根据异常类型采取不同的处理方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Enter a number: &quot;</span>))<br>    result = <span class="hljs-number">10</span> / x<br><span class="hljs-keyword">except</span> ZeroDivisionError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Error: Division by zero is not allowed.&quot;</span>)<br><span class="hljs-keyword">except</span> ValueError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Error: Invalid input, please enter a number.&quot;</span>)<br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;An unexpected error occurred: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="3-else-语句"><a href="#3-else-语句" class="headerlink" title="3. else 语句"></a>3. <strong><code>else</code> 语句</strong></h3><p><code>else</code> 语句用于在没有发生异常时执行一些代码。如果 <code>try</code> 块没有引发异常，则会执行 <code>else</code> 块中的代码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Enter a number: &quot;</span>))<br>    result = <span class="hljs-number">10</span> / x<br><span class="hljs-keyword">except</span> ZeroDivisionError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Error: Division by zero is not allowed.&quot;</span>)<br><span class="hljs-keyword">except</span> ValueError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Error: Invalid input, please enter a number.&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Result is <span class="hljs-subst">&#123;result&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="4-finally-语句"><a href="#4-finally-语句" class="headerlink" title="4. finally 语句"></a>4. <strong><code>finally</code> 语句</strong></h3><p><code>finally</code> 块中的代码无论是否发生异常都会执行，通常用于清理资源，例如关闭文件、数据库连接等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    file = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;example.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>)<br>    content = file.read()<br><span class="hljs-keyword">except</span> FileNotFoundError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Error: File not found.&quot;</span>)<br><span class="hljs-keyword">finally</span>:<br>    <span class="hljs-comment"># 资源清理，保证文件始终被关闭</span><br>    file.close()<br></code></pre></td></tr></table></figure>

<p>在这个例子中，即使文件打开失败并引发异常，<code>finally</code> 代码块中的 <code>file.close()</code> 也会执行，确保文件资源被正确释放。</p>
<h3 id="5-自定义异常"><a href="#5-自定义异常" class="headerlink" title="5. 自定义异常"></a>5. <strong>自定义异常</strong></h3><p>Python 允许用户定义自己的异常类，这样可以创建特定的异常类型以适应特定的错误处理需求。自定义异常类通常继承自 <code>Exception</code> 类。</p>
<h4 id="示例：自定义异常"><a href="#示例：自定义异常" class="headerlink" title="示例：自定义异常"></a>示例：自定义异常</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomError</span>(<span class="hljs-title class_ inherited__">Exception</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, message</span>):<br>        self.message = message<br>        <span class="hljs-built_in">super</span>().__init__(self.message)<br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-keyword">raise</span> CustomError(<span class="hljs-string">&quot;This is a custom exception!&quot;</span>)<br><span class="hljs-keyword">except</span> CustomError <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Custom Error: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>CustomError</code> 是自定义的异常类，继承自 Python 内置的 <code>Exception</code> 类。</li>
<li><code>raise</code> 语句用于显式地抛出异常。</li>
<li><code>super().__init__(self.message)</code> 调用父类 <code>Exception</code> 的构造函数。</li>
</ul>
<h3 id="6-捕获所有异常"><a href="#6-捕获所有异常" class="headerlink" title="6. 捕获所有异常"></a>6. <strong>捕获所有异常</strong></h3><p>如果你想捕获所有异常，而不仅仅是某种特定类型的异常，可以使用 <code>except</code> 后不指定异常类型，或指定 <code>Exception</code> 类。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># 可能引发任何类型异常的代码</span><br>    x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;Enter a number: &quot;</span>))<br>    result = <span class="hljs-number">10</span> / x<br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;An error occurred: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<p><strong>注意：</strong> 捕获所有异常并不推荐在实际编程中广泛使用，最好捕获特定的异常类型以便更好地定位和处理错误。</p>
<h3 id="7-抛出异常（raise）"><a href="#7-抛出异常（raise）" class="headerlink" title="7. 抛出异常（raise）"></a>7. <strong>抛出异常（<code>raise</code>）</strong></h3><p>在 Python 中，使用 <code>raise</code> 语句来手动抛出异常。可以抛出内置的异常，也可以抛出自定义的异常。</p>
<h4 id="示例：使用-raise-抛出异常"><a href="#示例：使用-raise-抛出异常" class="headerlink" title="示例：使用 raise 抛出异常"></a>示例：使用 <code>raise</code> 抛出异常</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>):<br>    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&quot;Cannot divide by zero!&quot;</span>)<br>    <span class="hljs-keyword">return</span> a / b<br><br><span class="hljs-keyword">try</span>:<br>    result = divide(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>)<br><span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Error: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure>

<p>在这个示例中，<code>divide</code> 函数会检查除数是否为零，如果为零，则手动抛出 <code>ValueError</code> 异常。</p>
<h3 id="8-异常链（Exception-Chaining）"><a href="#8-异常链（Exception-Chaining）" class="headerlink" title="8. 异常链（Exception Chaining）"></a>8. <strong>异常链（Exception Chaining）</strong></h3><p>异常链是指在捕获异常时重新抛出另一个异常。Python 提供了 <code>from</code> 关键字来实现异常链。当你在处理一个异常时，如果需要抛出一个新的异常，可以通过 <code>raise new_exception from original_exception</code> 来保持异常链。</p>
<h4 id="示例：异常链"><a href="#示例：异常链" class="headerlink" title="示例：异常链"></a>示例：异常链</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    x = <span class="hljs-built_in">int</span>(<span class="hljs-string">&quot;not_a_number&quot;</span>)<br><span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:<br>    <span class="hljs-keyword">raise</span> TypeError(<span class="hljs-string">&quot;A type error occurred&quot;</span>) <span class="hljs-keyword">from</span> e<br></code></pre></td></tr></table></figure>

<p>在这个例子中，<code>ValueError</code> 被捕获并且抛出一个新的 <code>TypeError</code> 异常，同时保持原始异常链。</p>
<h3 id="9-常见的内置异常类"><a href="#9-常见的内置异常类" class="headerlink" title="9. 常见的内置异常类"></a>9. <strong>常见的内置异常类</strong></h3><p>Python 提供了多种常见的内置异常类来处理不同类型的错误。以下是一些常见的异常类型：</p>
<table>
<thead>
<tr>
<th>异常类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Exception</code></td>
<td>所有异常的基类</td>
</tr>
<tr>
<td><code>ValueError</code></td>
<td>参数类型不正确（例如转换错误）</td>
</tr>
<tr>
<td><code>TypeError</code></td>
<td>变量类型不匹配</td>
</tr>
<tr>
<td><code>IndexError</code></td>
<td>序列索引超出范围</td>
</tr>
<tr>
<td><code>KeyError</code></td>
<td>字典中没有该键</td>
</tr>
<tr>
<td><code>FileNotFoundError</code></td>
<td>文件未找到</td>
</tr>
<tr>
<td><code>ZeroDivisionError</code></td>
<td>除以零错误</td>
</tr>
<tr>
<td><code>AttributeError</code></td>
<td>对象没有该属性</td>
</tr>
<tr>
<td><code>IOError</code></td>
<td>输入输出操作失败</td>
</tr>
<tr>
<td><code>ImportError</code></td>
<td>导入模块失败</td>
</tr>
<tr>
<td><code>NameError</code></td>
<td>使用未定义的变量</td>
</tr>
<tr>
<td><code>RuntimeError</code></td>
<td>运行时错误</td>
</tr>
<tr>
<td><code>NotImplementedError</code></td>
<td>功能未实现</td>
</tr>
<tr>
<td><code>OSError</code></td>
<td>操作系统错误</td>
</tr>
</tbody></table>
<h1 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h1><p>在 Python 中，内存管理由 Python 解释器自动处理。Python 提供了多种机制来管理内存，确保内存资源能够高效使用，并避免内存泄漏和资源浪费。Python 的内存管理机制主要包括以下几个方面：</p>
<ol>
<li><strong>自动内存管理</strong></li>
<li><strong>内存分配与释放</strong></li>
<li><strong>垃圾回收（Garbage Collection）</strong></li>
<li><strong>引用计数（Reference Counting）</strong></li>
<li><strong>内存池和内存管理优化</strong></li>
</ol>
<h3 id="1-自动内存管理"><a href="#1-自动内存管理" class="headerlink" title="1. 自动内存管理"></a>1. <strong>自动内存管理</strong></h3><p>Python 内存管理的一个主要特点是<strong>自动化</strong>。用户无需显式地分配和释放内存（如 C、C++ 中需要手动管理内存）。Python 通过内置的机制自动处理对象的生命周期和内存管理任务，用户只需关注对象的创建和使用。</p>
<h3 id="2-内存分配与释放"><a href="#2-内存分配与释放" class="headerlink" title="2. 内存分配与释放"></a>2. <strong>内存分配与释放</strong></h3><p>Python 使用了多种内存管理机制，来提高内存分配和释放的效率。每个对象在 Python 中都需要占用内存，这些对象包括基础数据类型（如整数、字符串等）和自定义的类对象。</p>
<ul>
<li><strong>内存分配</strong>：Python 对象在内存中通常是通过 <strong>堆</strong>（heap）分配的。当创建一个新的对象时，Python 会为该对象分配一块内存区域。</li>
<li><strong>内存释放</strong>：当对象不再使用时，Python 会自动回收这些对象所占用的内存。Python 的内存管理通过引用计数和垃圾回收机制来实现内存的自动释放。</li>
</ul>
<h3 id="3-引用计数（Reference-Counting）"><a href="#3-引用计数（Reference-Counting）" class="headerlink" title="3. 引用计数（Reference Counting）"></a>3. <strong>引用计数（Reference Counting）</strong></h3><p>Python 使用 <strong>引用计数</strong> 来跟踪每个对象有多少引用。引用计数是 Python 内存管理的核心。每当一个对象被引用时，它的引用计数增加；每当引用该对象的变量超出作用域或被删除时，它的引用计数减少。</p>
<h4 id="工作机制："><a href="#工作机制：" class="headerlink" title="工作机制："></a>工作机制：</h4><ul>
<li>当一个对象的引用计数变为零时（没有任何变量或对象引用它），该对象就会被回收，其占用的内存也会被释放。</li>
<li><strong><code>del</code></strong> 语句和对象超出作用域都会减少对象的引用计数。</li>
</ul>
<h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br>a = []<br><span class="hljs-built_in">print</span>(sys.getrefcount(a))  <span class="hljs-comment"># 输出引用计数，通常比你预期的多1，因为还有sys.getrefcount的引用</span><br><br>b = a  <span class="hljs-comment"># 增加引用</span><br><span class="hljs-built_in">print</span>(sys.getrefcount(a))  <span class="hljs-comment"># 输出引用计数增加</span><br></code></pre></td></tr></table></figure>

<p>虽然引用计数机制非常高效，但它也有一个问题：无法解决<strong>循环引用</strong>的问题。即当两个或更多对象相互引用时，即使它们的引用计数为零，Python 也不会自动回收这些对象。</p>
<h3 id="4-垃圾回收（Garbage-Collection）"><a href="#4-垃圾回收（Garbage-Collection）" class="headerlink" title="4. 垃圾回收（Garbage Collection）"></a>4. <strong>垃圾回收（Garbage Collection）</strong></h3><p>为了处理循环引用的问题，Python 使用了 <strong>垃圾回收</strong>（GC）机制。垃圾回收是一种自动回收不再需要的对象的技术，Python 使用了一种称为 <strong>分代收集</strong>（Generational Collection）的垃圾回收算法。</p>
<ul>
<li><p>Python 的垃圾回收机制会定期检查哪些对象不再被引用，并将其从内存中移除。</p>
</li>
<li><p>Python 的垃圾回收机制基于 </p>
<p>分代理论</p>
<p>，将对象分为三代：</p>
<ul>
<li><strong>第 0 代</strong>：最近创建的对象。</li>
<li><strong>第 1 代</strong>：存活较长时间的对象。</li>
<li><strong>第 2 代</strong>：存活更长时间的对象。</li>
</ul>
</li>
</ul>
<p>Python 在垃圾回收过程中优先清理年轻对象（第 0 代）。随着对象的存活时间增加，它们的代数也会增大，回收的频率会减少。</p>
<h4 id="示例：显示垃圾回收"><a href="#示例：显示垃圾回收" class="headerlink" title="示例：显示垃圾回收"></a>示例：显示垃圾回收</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gc<br><br><span class="hljs-comment"># 禁用垃圾回收</span><br>gc.disable()<br><br><span class="hljs-comment"># 启用垃圾回收</span><br>gc.enable()<br><br><span class="hljs-comment"># 手动触发垃圾回收</span><br>gc.collect()<br></code></pre></td></tr></table></figure>

<h3 id="5-内存池和内存管理优化"><a href="#5-内存池和内存管理优化" class="headerlink" title="5. 内存池和内存管理优化"></a>5. <strong>内存池和内存管理优化</strong></h3><p>Python 在内存管理方面做了很多优化，尤其是在 <strong>小对象</strong> 的分配上。Python 使用了 <strong>内存池</strong>（memory pools）技术来提高内存分配的效率。</p>
<h4 id="内存池机制"><a href="#内存池机制" class="headerlink" title="内存池机制"></a>内存池机制</h4><ul>
<li>Python 使用 <code>PyMalloc</code> 内存池来管理小对象的内存分配，特别是对于大小固定的小对象（例如小整数、小字符串等）。</li>
<li>Python 会将内存按块分配，避免频繁的操作系统内存分配，从而提高性能。</li>
</ul>
<h3 id="6-内存管理的优化与调优"><a href="#6-内存管理的优化与调优" class="headerlink" title="6. 内存管理的优化与调优"></a>6. <strong>内存管理的优化与调优</strong></h3><ul>
<li><strong>对象池化</strong>：Python 中的许多内置类型（如整数、浮点数、字符串等）使用对象池机制，即对于常用的对象（如较小的整数、常见的字符串），Python 会重用内存而不是重新分配。这样可以减少内存的碎片化和内存分配的开销。</li>
<li><strong>减少内存碎片</strong>：Python 会根据对象的生命周期和存活时间，尽量避免内存碎片化。通过合理的内存池机制和分代回收策略，Python 能够高效地管理内存。</li>
</ul>
<h3 id="7-查看内存使用情况"><a href="#7-查看内存使用情况" class="headerlink" title="7. 查看内存使用情况"></a>7. <strong>查看内存使用情况</strong></h3><p>你可以使用一些工具来查看 Python 程序的内存使用情况，比如 <code>sys.getsizeof()</code> 和 <code>gc</code> 模块。</p>
<ul>
<li><code>sys.getsizeof()</code> 用于获取对象在内存中的大小。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><br>x = <span class="hljs-number">42</span><br><span class="hljs-built_in">print</span>(sys.getsizeof(x))  <span class="hljs-comment"># 输出变量x占用的内存（字节）</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>gc</code> 模块用于检查垃圾回收的状态并触发手动回收。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gc<br><br>gc.collect()  <span class="hljs-comment"># 手动触发垃圾回收</span><br><span class="hljs-built_in">print</span>(gc.get_count())  <span class="hljs-comment"># 获取当前垃圾回收器的各代对象数量</span><br></code></pre></td></tr></table></figure>

<h3 id="8-内存泄漏（Memory-Leak）"><a href="#8-内存泄漏（Memory-Leak）" class="headerlink" title="8. 内存泄漏（Memory Leak）"></a>8. <strong>内存泄漏（Memory Leak）</strong></h3><p>虽然 Python 自动进行内存管理，但内存泄漏仍然可能发生，特别是在复杂的应用程序中。当对象的引用计数没有减少到零时，这些对象无法被垃圾回收，从而导致内存无法释放。</p>
<ul>
<li><strong>循环引用</strong>：当两个或多个对象相互引用，且没有外部引用时，Python 的引用计数机制不会回收这些对象。虽然垃圾回收可以解决大部分循环引用的问题，但如果循环引用中的对象包含特殊的资源（如文件句柄、数据库连接等），它们的清理可能不完全，导致内存泄漏。</li>
<li><strong>解决方法</strong>：<ul>
<li>使用 <code>weakref</code> 模块来创建弱引用，避免循环引用。</li>
<li>定期检查程序的内存使用情况，使用 <code>gc</code> 模块来清理不再使用的对象。</li>
</ul>
</li>
</ul>
<h1 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h1><p>Python 的网络编程通过内置的 <code>socket</code> 模块及其他高级模块，如 <code>asyncio</code>、<code>http</code>、<code>socketserver</code> 等，提供了强大的网络通信功能。Python 支持客户端和服务器端的网络通信，包括基于 TCP&#x2F;IP 协议的通信和其他协议的支持。</p>
<h3 id="1-基础概念"><a href="#1-基础概念" class="headerlink" title="1. 基础概念"></a>1. <strong>基础概念</strong></h3><p>在网络编程中，我们通常涉及以下几个概念：</p>
<ul>
<li><strong>客户端</strong>：请求连接并与服务器进行通信的程序。</li>
<li><strong>服务器端</strong>：接收客户端请求并响应的程序。</li>
<li><strong>Socket</strong>：一种网络通信的抽象，允许程序通过网络发送和接收数据。它是基于 IP 地址和端口号进行通信的。</li>
<li><strong>IP 地址</strong>：标识网络中的每一台设备。</li>
<li><strong>端口号</strong>：标识计算机上每个进程或应用程序的标识符。</li>
</ul>
<h3 id="2-Python-socket-模块"><a href="#2-Python-socket-模块" class="headerlink" title="2. Python socket 模块"></a>2. <strong>Python <code>socket</code> 模块</strong></h3><p><code>socket</code> 模块是 Python 用于网络通信的核心模块，它支持客户端和服务器端的功能。使用 <code>socket</code> 模块，您可以通过网络协议（如 TCP 或 UDP）创建和使用套接字（socket）。</p>
<h3 id="3-TCP-Socket-编程"><a href="#3-TCP-Socket-编程" class="headerlink" title="3. TCP Socket 编程"></a>3. <strong>TCP Socket 编程</strong></h3><p>TCP（传输控制协议）是面向连接的、可靠的通信协议。使用 TCP 套接字，客户端和服务器可以进行双向数据传输。下面是一个简单的 TCP 网络编程示例，包括服务器端和客户端。</p>
<h4 id="服务器端（TCP-Server）"><a href="#服务器端（TCP-Server）" class="headerlink" title="服务器端（TCP Server）"></a>服务器端（TCP Server）</h4><p>服务器端程序创建一个 TCP 套接字，绑定到指定的 IP 地址和端口，监听客户端的连接请求，并处理客户端发送的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-comment"># 创建一个 TCP/IP socket</span><br>server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br><br><span class="hljs-comment"># 绑定 IP 地址和端口</span><br>server_address = (<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">65432</span>)<br>server_socket.bind(server_address)<br><br><span class="hljs-comment"># 开始监听连接</span><br>server_socket.listen(<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Waiting for a connection...&quot;</span>)<br><br><span class="hljs-comment"># 等待连接</span><br>connection, client_address = server_socket.accept()<br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Connection established with <span class="hljs-subst">&#123;client_address&#125;</span>&quot;</span>)<br>    <br>    <span class="hljs-comment"># 接收数据并发送响应</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        data = connection.recv(<span class="hljs-number">1024</span>)<br>        <span class="hljs-keyword">if</span> data:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received: <span class="hljs-subst">&#123;data.decode()&#125;</span>&quot;</span>)<br>            connection.sendall(<span class="hljs-string">b&#x27;Hello, client&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">break</span><br><span class="hljs-keyword">finally</span>:<br>    <span class="hljs-comment"># 关闭连接</span><br>    connection.close()<br></code></pre></td></tr></table></figure>

<ul>
<li><code>socket.socket(socket.AF_INET, socket.SOCK_STREAM)</code>：创建一个 IPv4 地址族的 TCP 套接字。</li>
<li><code>bind()</code>：将套接字绑定到指定的 IP 地址和端口。</li>
<li><code>listen()</code>：开始监听连接，参数指定监听的最大连接数。</li>
<li><code>accept()</code>：等待客户端连接请求，并返回一个新的套接字和客户端地址。</li>
</ul>
<h4 id="客户端（TCP-Client）"><a href="#客户端（TCP-Client）" class="headerlink" title="客户端（TCP Client）"></a>客户端（TCP Client）</h4><p>客户端程序创建一个套接字，连接到服务器，并发送请求。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-comment"># 创建一个 TCP/IP socket</span><br>client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br><br><span class="hljs-comment"># 连接到服务器</span><br>server_address = (<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">65432</span>)<br>client_socket.connect(server_address)<br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-comment"># 发送数据</span><br>    message = <span class="hljs-string">&#x27;Hello, server&#x27;</span><br>    client_socket.sendall(message.encode())<br><br>    <span class="hljs-comment"># 接收响应</span><br>    data = client_socket.recv(<span class="hljs-number">1024</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received from server: <span class="hljs-subst">&#123;data.decode()&#125;</span>&quot;</span>)<br><span class="hljs-keyword">finally</span>:<br>    <span class="hljs-comment"># 关闭连接</span><br>    client_socket.close()<br></code></pre></td></tr></table></figure>

<ul>
<li><code>connect()</code>：连接到服务器。</li>
<li><code>sendall()</code>：发送数据到服务器。</li>
<li><code>recv()</code>：接收服务器返回的数据。</li>
</ul>
<h3 id="4-UDP-Socket-编程"><a href="#4-UDP-Socket-编程" class="headerlink" title="4. UDP Socket 编程"></a>4. <strong>UDP Socket 编程</strong></h3><p>UDP（用户数据报协议）是无连接的、不可靠的通信协议。它不像 TCP 那样确保数据的可靠性和顺序，但它比 TCP 更轻量，适用于不需要严格数据传输保障的场景（如实时视频、语音通信等）。</p>
<h4 id="服务器端（UDP-Server）"><a href="#服务器端（UDP-Server）" class="headerlink" title="服务器端（UDP Server）"></a>服务器端（UDP Server）</h4><p>UDP 服务器不需要绑定到一个特定的客户端连接，而是监听某个端口，并接收来自客户端的报文。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-comment"># 创建一个 UDP 套接字</span><br>server_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br><span class="hljs-comment"># 绑定 IP 地址和端口</span><br>server_address = (<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">65432</span>)<br>server_socket.bind(server_address)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Waiting for messages...&quot;</span>)<br><br><span class="hljs-comment"># 接收数据并发送响应</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    data, client_address = server_socket.recvfrom(<span class="hljs-number">1024</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received: <span class="hljs-subst">&#123;data.decode()&#125;</span> from <span class="hljs-subst">&#123;client_address&#125;</span>&quot;</span>)<br>    server_socket.sendto(<span class="hljs-string">b&#x27;Hello, UDP client&#x27;</span>, client_address)<br></code></pre></td></tr></table></figure>

<h4 id="客户端（UDP-Client）"><a href="#客户端（UDP-Client）" class="headerlink" title="客户端（UDP Client）"></a>客户端（UDP Client）</h4><p>UDP 客户端不需要建立连接，而是直接向服务器发送数据报文。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> socket<br><br><span class="hljs-comment"># 创建一个 UDP 套接字</span><br>client_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)<br><br><span class="hljs-comment"># 服务器的地址和端口</span><br>server_address = (<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">65432</span>)<br><br><span class="hljs-comment"># 发送数据</span><br>message = <span class="hljs-string">&#x27;Hello, UDP server&#x27;</span><br>client_socket.sendto(message.encode(), server_address)<br><br><span class="hljs-comment"># 接收响应</span><br>data, server = client_socket.recvfrom(<span class="hljs-number">1024</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received from server: <span class="hljs-subst">&#123;data.decode()&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># 关闭套接字</span><br>client_socket.close()<br></code></pre></td></tr></table></figure>

<h3 id="5-异步网络编程（asyncio-模块）"><a href="#5-异步网络编程（asyncio-模块）" class="headerlink" title="5. 异步网络编程（asyncio 模块）"></a>5. <strong>异步网络编程（<code>asyncio</code> 模块）</strong></h3><p>Python 还提供了 <code>asyncio</code> 模块，支持异步 I&#x2F;O 操作，适合需要高并发的网络应用（如 Web 服务器、聊天应用等）。通过 <code>async</code> 和 <code>await</code>，可以处理大量的网络请求，而无需阻塞主线程。</p>
<h4 id="异步-TCP-服务器（asyncio）"><a href="#异步-TCP-服务器（asyncio）" class="headerlink" title="异步 TCP 服务器（asyncio）"></a>异步 TCP 服务器（<code>asyncio</code>）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_client</span>(<span class="hljs-params">reader, writer</span>):<br>    data = <span class="hljs-keyword">await</span> reader.read(<span class="hljs-number">100</span>)<br>    message = data.decode()<br>    addr = writer.get_extra_info(<span class="hljs-string">&#x27;peername&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Received <span class="hljs-subst">&#123;message&#125;</span> from <span class="hljs-subst">&#123;addr&#125;</span>&quot;</span>)<br><br>    response = <span class="hljs-string">&#x27;Hello, client&#x27;</span><br>    writer.write(response.encode())<br>    <span class="hljs-keyword">await</span> writer.drain()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Closing the connection&quot;</span>)<br>    writer.close()<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    server = <span class="hljs-keyword">await</span> asyncio.start_server(<br>        handle_client, <span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">65432</span>)<br>    addr = server.sockets[<span class="hljs-number">0</span>].getsockname()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Serving on <span class="hljs-subst">&#123;addr&#125;</span>&#x27;</span>)<br><br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> server:<br>        <span class="hljs-keyword">await</span> server.serve_forever()<br><br>asyncio.run(main())<br></code></pre></td></tr></table></figure>

<ul>
<li><code>asyncio.start_server()</code>：创建异步 TCP 服务器。</li>
<li><code>await reader.read()</code>：异步地读取客户端发送的数据。</li>
<li><code>writer.write()</code>：异步地发送数据到客户端。</li>
</ul>
<h4 id="异步-TCP-客户端（asyncio）"><a href="#异步-TCP-客户端（asyncio）" class="headerlink" title="异步 TCP 客户端（asyncio）"></a>异步 TCP 客户端（<code>asyncio</code>）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> asyncio<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">tcp_client</span>():<br>    reader, writer = <span class="hljs-keyword">await</span> asyncio.open_connection(<br>        <span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">65432</span>)<br><br>    message = <span class="hljs-string">&#x27;Hello, server&#x27;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Sending: <span class="hljs-subst">&#123;message&#125;</span>&#x27;</span>)<br>    writer.write(message.encode())<br>    <span class="hljs-keyword">await</span> writer.drain()<br><br>    data = <span class="hljs-keyword">await</span> reader.read(<span class="hljs-number">100</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Received: <span class="hljs-subst">&#123;data.decode()&#125;</span>&#x27;</span>)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Closing the connection&#x27;</span>)<br>    writer.close()<br><br>asyncio.run(tcp_client())<br></code></pre></td></tr></table></figure>

<h3 id="6-HTTP-网络编程"><a href="#6-HTTP-网络编程" class="headerlink" title="6. HTTP 网络编程"></a>6. <strong>HTTP 网络编程</strong></h3><p>除了 TCP 和 UDP，Python 也提供了用于处理 HTTP 协议的库，如 <code>http.client</code>、<code>requests</code> 等。<code>requests</code> 是一个非常流行且易于使用的库，适合发送 HTTP 请求和处理响应。</p>
<h4 id="使用-requests-库发送-HTTP-请求"><a href="#使用-requests-库发送-HTTP-请求" class="headerlink" title="使用 requests 库发送 HTTP 请求"></a>使用 <code>requests</code> 库发送 HTTP 请求</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-comment"># 发送 GET 请求</span><br>response = requests.get(<span class="hljs-string">&#x27;https://www.example.com&#x27;</span>)<br><span class="hljs-built_in">print</span>(response.text)  <span class="hljs-comment"># 打印响应的内容</span><br><br><span class="hljs-comment"># 发送 POST 请求</span><br>data = &#123;<span class="hljs-string">&#x27;key&#x27;</span>: <span class="hljs-string">&#x27;value&#x27;</span>&#125;<br>response = requests.post(<span class="hljs-string">&#x27;https://www.example.com&#x27;</span>, data=data)<br><span class="hljs-built_in">print</span>(response.text)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>requests.get()</code>：发送一个 GET 请求。</li>
<li><code>requests.post()</code>：发送一个 POST 请求。</li>
</ul>
<h3 id="7-HTTP-服务器"><a href="#7-HTTP-服务器" class="headerlink" title="7. HTTP 服务器"></a>7. <strong>HTTP 服务器</strong></h3><p>可以使用 <code>http.server</code> 模块创建一个简单的 HTTP 服务器。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> http.server <span class="hljs-keyword">import</span> SimpleHTTPRequestHandler, HTTPServer<br><br><span class="hljs-comment"># 设置服务器地址和端口</span><br>server_address = (<span class="hljs-string">&#x27;localhost&#x27;</span>, <span class="hljs-number">8000</span>)<br>httpd = HTTPServer(server_address, SimpleHTTPRequestHandler)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Serving HTTP on port 8000&quot;</span>)<br>httpd.serve_forever()<br></code></pre></td></tr></table></figure>

<ul>
<li><code>SimpleHTTPRequestHandler</code>：内置的 HTTP 请求处理器，处理静态文件请求。</li>
<li><code>HTTPServer</code>：HTTP 服务器类。</li>
</ul>
<h1 id="文件流处理"><a href="#文件流处理" class="headerlink" title="文件流处理"></a>文件流处理</h1><p>在 Python 中，文件流处理是通过内置的 <code>open()</code> 函数和文件对象的方法来进行的。文件流处理允许程序读取、写入、修改文件内容，并且支持处理大文件的高效方式。</p>
<h3 id="1-文件操作基本流程"><a href="#1-文件操作基本流程" class="headerlink" title="1. 文件操作基本流程"></a>1. <strong>文件操作基本流程</strong></h3><p>文件流操作的基本流程通常包括以下几个步骤：</p>
<ol>
<li><strong>打开文件</strong>：使用 <code>open()</code> 函数。</li>
<li><strong>读取或写入文件</strong>：通过文件对象的 <code>read()</code>、<code>write()</code>、<code>readline()</code> 等方法来读取或写入内容。</li>
<li><strong>关闭文件</strong>：使用 <code>close()</code> 方法关闭文件，释放资源。</li>
</ol>
<h3 id="2-open-函数"><a href="#2-open-函数" class="headerlink" title="2. open() 函数"></a>2. <strong><code>open()</code> 函数</strong></h3><p><code>open()</code> 函数用于打开文件并返回一个文件对象，供后续的读取或写入操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">file = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>)  <span class="hljs-comment"># 打开文件进行读取</span><br></code></pre></td></tr></table></figure>

<ul>
<li><p>常用模式</p>
<p>：</p>
<ul>
<li><code>&#39;r&#39;</code>：只读模式，文件必须存在。</li>
<li><code>&#39;w&#39;</code>：写入模式，如果文件存在则覆盖，不存在则创建。</li>
<li><code>&#39;a&#39;</code>：追加模式，文件不存在则创建，存在则在文件末尾追加内容。</li>
<li><code>&#39;b&#39;</code>：二进制模式，通常与其他模式一起使用，例如 <code>&#39;rb&#39;</code> 或 <code>&#39;wb&#39;</code>。</li>
<li><code>&#39;x&#39;</code>：独占创建模式，如果文件已经存在则会引发 <code>FileExistsError</code>。</li>
</ul>
</li>
</ul>
<h3 id="3-读取文件"><a href="#3-读取文件" class="headerlink" title="3. 读取文件"></a>3. <strong>读取文件</strong></h3><h4 id="读取整个文件"><a href="#读取整个文件" class="headerlink" title="读取整个文件"></a>读取整个文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    content = file.read()  <span class="hljs-comment"># 读取文件所有内容</span><br>    <span class="hljs-built_in">print</span>(content)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>file.read()</code>：读取整个文件内容。</li>
<li><code>with</code> 语句：用于自动关闭文件，即使发生异常也会确保文件被正确关闭。</li>
</ul>
<h4 id="读取文件的每一行"><a href="#读取文件的每一行" class="headerlink" title="读取文件的每一行"></a>读取文件的每一行</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    lines = file.readlines()  <span class="hljs-comment"># 读取文件的每一行</span><br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br>        <span class="hljs-built_in">print</span>(line.strip())  <span class="hljs-comment"># 使用 strip() 去除行末的换行符</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>file.readlines()</code>：读取文件的所有行，返回一个列表，其中每个元素是文件的一行。</li>
</ul>
<h4 id="逐行读取文件（适用于大文件）"><a href="#逐行读取文件（适用于大文件）" class="headerlink" title="逐行读取文件（适用于大文件）"></a>逐行读取文件（适用于大文件）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> file:  <span class="hljs-comment"># 按行读取</span><br>        <span class="hljs-built_in">print</span>(line.strip())<br></code></pre></td></tr></table></figure>

<ul>
<li>使用 <code>for</code> 循环按行读取文件可以避免一次性读取整个文件，尤其在处理大文件时更为高效。</li>
</ul>
<h3 id="4-写入文件"><a href="#4-写入文件" class="headerlink" title="4. 写入文件"></a>4. <strong>写入文件</strong></h3><h4 id="写入字符串到文件"><a href="#写入字符串到文件" class="headerlink" title="写入字符串到文件"></a>写入字符串到文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    file.write(<span class="hljs-string">&quot;Hello, World!\n&quot;</span>)  <span class="hljs-comment"># 写入内容</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>file.write()</code>：将字符串写入文件，但不会自动添加换行符。</li>
</ul>
<h4 id="追加内容到文件"><a href="#追加内容到文件" class="headerlink" title="追加内容到文件"></a>追加内容到文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    file.write(<span class="hljs-string">&quot;This is an additional line.\n&quot;</span>)  <span class="hljs-comment"># 追加内容</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>file.write()</code> 也可以用于追加内容，通过使用 <code>&#39;a&#39;</code> 模式。</li>
</ul>
<h4 id="写入多行内容"><a href="#写入多行内容" class="headerlink" title="写入多行内容"></a>写入多行内容</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    lines = [<span class="hljs-string">&#x27;First line\n&#x27;</span>, <span class="hljs-string">&#x27;Second line\n&#x27;</span>, <span class="hljs-string">&#x27;Third line\n&#x27;</span>]<br>    file.writelines(lines)  <span class="hljs-comment"># 写入多个行</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>file.writelines()</code>：接受一个字符串列表，逐行写入到文件中。注意，这里不会自动添加换行符，需要确保每一行的内容末尾已有换行符。</li>
</ul>
<h3 id="5-二进制文件操作"><a href="#5-二进制文件操作" class="headerlink" title="5. 二进制文件操作"></a>5. <strong>二进制文件操作</strong></h3><p>对于图像、音频或其他二进制数据，文件操作需要使用二进制模式 <code>&#39;b&#39;</code>。例如：</p>
<h4 id="读取二进制文件"><a href="#读取二进制文件" class="headerlink" title="读取二进制文件"></a>读取二进制文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;image.png&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    data = file.read()  <span class="hljs-comment"># 读取二进制数据</span><br>    <span class="hljs-built_in">print</span>(data)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>rb</code> 模式用于以二进制方式打开文件，读取图像、音频等二进制文件时非常常见。</li>
</ul>
<h4 id="写入二进制文件"><a href="#写入二进制文件" class="headerlink" title="写入二进制文件"></a>写入二进制文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;copy_image.png&#x27;</span>, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    file.write(data)  <span class="hljs-comment"># 将读取的二进制数据写入到新文件</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>wb</code> 模式用于以二进制方式写入文件。</li>
</ul>
<h3 id="6-文件指针和文件位置"><a href="#6-文件指针和文件位置" class="headerlink" title="6. 文件指针和文件位置"></a>6. <strong>文件指针和文件位置</strong></h3><p>文件指针用于指示文件当前的读取&#x2F;写入位置。可以使用 <code>seek()</code> 和 <code>tell()</code> 来操作和查询文件指针。</p>
<ul>
<li><p><code>seek(offset, whence)</code></p>
<p>：设置文件指针位置。</p>
<ul>
<li><code>offset</code>：偏移量，单位是字节。</li>
<li><code>whence</code>：参考位置，默认为 <code>os.SEEK_SET</code>（文件开头）。其他值还包括 <code>os.SEEK_CUR</code>（当前位置）和 <code>os.SEEK_END</code>（文件末尾）。</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    file.seek(<span class="hljs-number">5</span>)  <span class="hljs-comment"># 将文件指针移动到第5个字节</span><br>    content = file.read(<span class="hljs-number">10</span>)  <span class="hljs-comment"># 从文件指针位置读取10个字节</span><br>    <span class="hljs-built_in">print</span>(content)<br></code></pre></td></tr></table></figure>

<ul>
<li>**<code>tell()</code>**：返回当前文件指针的位置。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    file.seek(<span class="hljs-number">5</span>)  <span class="hljs-comment"># 将文件指针移动到第5个字节</span><br>    <span class="hljs-built_in">print</span>(file.tell())  <span class="hljs-comment"># 输出当前指针的位置（5）</span><br></code></pre></td></tr></table></figure>

<h3 id="7-文件关闭"><a href="#7-文件关闭" class="headerlink" title="7. 文件关闭"></a>7. <strong>文件关闭</strong></h3><p>虽然使用 <code>with</code> 语句可以自动关闭文件，但如果没有使用 <code>with</code>，你需要手动关闭文件：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">file = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>)<br><span class="hljs-comment"># 执行文件操作</span><br>file.close()  <span class="hljs-comment"># 关闭文件</span><br></code></pre></td></tr></table></figure>

<p>确保每次文件操作结束后调用 <code>close()</code> 以释放系统资源。</p>
<h3 id="8-异常处理"><a href="#8-异常处理" class="headerlink" title="8. 异常处理"></a>8. <strong>异常处理</strong></h3><p>在文件操作中，文件可能不存在、权限不足等，因此需要进行异常处理。使用 <code>try</code>、<code>except</code> 来捕获可能的错误。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;non_existent_file.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>        content = file.read()<br><span class="hljs-keyword">except</span> FileNotFoundError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;File not found!&quot;</span>)<br><span class="hljs-keyword">except</span> IOError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Error reading file!&quot;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="9-文件操作常见错误"><a href="#9-文件操作常见错误" class="headerlink" title="9. 文件操作常见错误"></a>9. <strong>文件操作常见错误</strong></h3><ul>
<li>**<code>FileNotFoundError</code>**：文件未找到。</li>
<li>**<code>PermissionError</code>**：权限不足，无法访问文件。</li>
<li>**<code>IOError</code>**：发生了其他 I&#x2F;O 错误。</li>
</ul>
<h3 id="10-os-模块与文件处理"><a href="#10-os-模块与文件处理" class="headerlink" title="10. os 模块与文件处理"></a>10. <strong><code>os</code> 模块与文件处理</strong></h3><p>Python 的 <code>os</code> 模块也提供了很多用于文件系统操作的功能，如文件的删除、重命名、查询文件属性等。</p>
<ul>
<li><strong>删除文件</strong>：<code>os.remove()</code></li>
<li><strong>重命名文件</strong>：<code>os.rename()</code></li>
<li><strong>检查文件是否存在</strong>：<code>os.path.exists()</code></li>
<li><strong>获取文件大小</strong>：<code>os.path.getsize()</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-comment"># 检查文件是否存在</span><br><span class="hljs-keyword">if</span> os.path.exists(<span class="hljs-string">&#x27;example.txt&#x27;</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;File exists&quot;</span>)<br><br><span class="hljs-comment"># 获取文件大小</span><br>file_size = os.path.getsize(<span class="hljs-string">&#x27;example.txt&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;File size: <span class="hljs-subst">&#123;file_size&#125;</span> bytes&quot;</span>)<br><br><span class="hljs-comment"># 删除文件</span><br>os.remove(<span class="hljs-string">&#x27;example.txt&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h3 id="11-文件锁定"><a href="#11-文件锁定" class="headerlink" title="11. 文件锁定"></a>11. <strong>文件锁定</strong></h3><p>如果多个程序或线程需要同时操作同一个文件，可能会发生竞争条件（race condition）。Python 可以使用 <code>fcntl</code> 或 <code>msvcrt</code>（在 Windows 上）来对文件进行锁定。</p>
<p>。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="category-chain-item">计算机基础</a>
  
  
    <span>></span>
    
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="category-chain-item">编程语言</a>
  
  
    <span>></span>
    
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/" class="category-chain-item">Python</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="print-no-link">#基础知识</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Python基础语法概览</div>
      <div>http://example.com/2025/05/09/计算机基础/编程语言/Python/Python语法概览/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Ling</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年5月9日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/05/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0Python%E8%AF%AD%E8%A8%80/" title="深入学习Python语言">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">深入学习Python语言</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/05/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/JavaScript%E8%AF%AD%E6%B3%95%E6%A6%82%E8%A7%88/" title="JavaScript语法概览">
                        <span class="hidden-mobile">JavaScript语法概览</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
